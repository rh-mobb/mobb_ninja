<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.109.0"><meta name=generator content="Relearn 5.2.3+tip"><meta name=description content><title>Security Reference Architecture for ROSA :: Managed OpenShift Black Belt - Unofficial Documentation</title><link href=https://mobb.ninja/css/fontawesome-all.min.css?1673631443 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://mobb.ninja/css/fontawesome-all.min.css?1673631443 rel=stylesheet></noscript><link href=https://mobb.ninja/css/featherlight.min.css?1673631443 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://mobb.ninja/css/featherlight.min.css?1673631443 rel=stylesheet></noscript><link href=https://mobb.ninja/css/auto-complete.css?1673631443 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://mobb.ninja/css/auto-complete.css?1673631443 rel=stylesheet></noscript><link href=https://mobb.ninja/css/perfect-scrollbar.min.css?1673631443 rel=stylesheet><link href=https://mobb.ninja/css/nucleus.css?1673631443 rel=stylesheet><link href=https://mobb.ninja/css/fonts.css?1673631443 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://mobb.ninja/css/fonts.css?1673631443 rel=stylesheet></noscript><link href=https://mobb.ninja/css/theme.css?1673631443 rel=stylesheet><link href=https://mobb.ninja/css/theme-red.css?1673631443 rel=stylesheet id=variant-style><link href=https://mobb.ninja/css/ie.css?1673631443 rel=stylesheet><link href=https://mobb.ninja/css/variant.css?1673631443 rel=stylesheet><link href=https://mobb.ninja/css/print.css?1673631443 rel=stylesheet media=print><script src=https://mobb.ninja/js/variant.js?1673631443></script>
<script>var index_url="https://mobb.ninja/index.json",baseUriFull,root_url="https://mobb.ninja/",baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",baseUriFull="https://mobb.ninja/",window.variants&&variants.init(["red"])</script><script src=https://mobb.ninja/js/jquery.min.js?1673631443 defer></script></head><body class="mobile-support default" data-url=https://mobb.ninja/docs/rosa/security-ra/><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable><div><div class=navigation><a class="nav nav-next" href=https://mobb.ninja/docs/rosa/rosa-asea-landing-zone/ title="Integrating ROSA and ASEA Landing Zones (&#129106;)"><i class="fas fa-chevron-right fa-fw"></i></a></div><div class=navigation><a class="nav nav-prev" href=https://mobb.ninja/docs/rosa/sts-oidc-flow/ title="STS OIDC in ROSA : How it works! (&#129104;)"><i class="fas fa-chevron-left fa-fw"></i></a></div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle title='Menu (CTRL+ALT+m)'><i class="fas fa-bars fa-fw"></i></a></span>
<span id=toc-menu title='Table of Contents (CTRL+ALT+t)'><i class="fas fa-list-alt fa-fw"></i></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><meta itemprop=itemListOrder content="Descending"><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="4"><a itemprop=item href=https://mobb.ninja/><span itemprop=name>Documentation from the MOBB</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="3"><a itemprop=item href=https://mobb.ninja/docs/><span itemprop=name>Documentation from the MOBB</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="2"><a itemprop=item href=https://mobb.ninja/docs/rosa/><span itemprop=name>Red Hat Openshift Service on AWS</span></a> ></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><meta itemprop=position content="1"><a itemprop=item href=https://mobb.ninja/docs/rosa/security-ra/ aria-disabled=true><span itemprop=name>Security Reference Architecture for ROSA</span></a></li></ol></div><div class="default-animation progress"><div class=wrapper><nav id=TableOfContents><ul><li><a href=#rosa-day-1-configuration>ROSA Day 1 Configuration</a><ul><li><a href=#aws-privatelink-networking>AWS PrivateLink Networking</a></li><li><a href=#aws-security-token-service-sts-mode>AWS Security Token Service (STS) Mode</a></li><li><a href=#customer-supplied-kms-key>Customer-Supplied KMS Key</a></li><li><a href=#multi-availability-zone>Multi-Availability Zone</a></li><li><a href=#deploy-the-day-1-rosa-sra-via-rosa-cli>Deploy the Day 1 ROSA SRA via ROSA CLI</a></li></ul></li><li><a href=#rosa-day-2-security-and-operations>ROSA Day 2 Security and Operations</a><ul><li><a href=#configure-an-identity-provider>Configure an Identity Provider</a></li><li><a href=#configure-cloudwatch-log-forwarding>Configure CloudWatch Log Forwarding</a></li><li><a href=#configure-custom-ingress-tls-profile>Configure Custom Ingress TLS Profile</a></li><li><a href=#compliance-operator>Compliance Operator</a></li><li><a href=#openshift-service-mesh>OpenShift Service Mesh</a></li><li><a href=#backup-and-restore--disaster-recovery>Backup and Restore / Disaster Recovery</a></li><li><a href=#configure-aws-waf-and-cloudfront-for-application-ingress>Configure AWS WAF and CloudFront for Application Ingress</a></li><li><a href=#use-and-store-secrets-securely-in-aws>Use and Store Secrets Securely in AWS</a></li><li><a href=#provide-external-persistent-storage-to-applications-on-rosa>Provide External Persistent Storage to Applications on ROSA</a></li></ul></li></ul></nav></div></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><div id=head-tags><div class=tags><a class=tag-link href=https://mobb.ninja/tags/aws>AWS</a>
<a class=tag-link href=https://mobb.ninja/tags/rosa>ROSA</a></div></div><style>.alert{padding:15px;margin-bottom:20px;border:1px solid transparent;border-radius:4px}.alert-warning{background-color:#fcf8e3;border-color:#fbeed5;color:#c09853}</style><p class="alert alert-warning"><b>IMPORTANT NOTE</b>: This site is not official Red Hat documentation and is provided for informational purposes only. These guides may be experimental, proof of concept, or early adoption. Officially supported documentation is available at <a href=https://docs.openshift.com target=_blank>docs.openshift.com</a> and <a href=https://access.redhat.com target=_blank>access.redhat.com</a>.</p><article class=default><h1>Security Reference Architecture for ROSA</h1><p><strong>Tyler Stacey</strong></p><p>The <strong>Security Reference Architecture for ROSA</strong> is a set of guidelines for deploying Red Hat OpenShift on AWS (ROSA) clusters to support high-security production workloads that align with Red Hat and AWS best practices.</p><p>This overall architectural guidance compliments detailed, specific recommendations for AWS services and Red Hat OpenShift Container Platform.</p><p>The Security Reference Architecture (SRA) for ROSA is a living document and is updated periodically based on new feature releases, customer feedback and evolving security best practices.</p><p><img src=./rosa-security-ra.png alt=security-ra></p><p>This document is divided into the following sections:</p><ul><li>ROSA Day 1 Configuration</li><li>ROSA Day 2 Security and Operations</li></ul><h2 id=rosa-day-1-configuration>ROSA Day 1 Configuration</h2><p>ROSA Day 1 configurations are applied to the cluster at the time it is created; they cannot be modified after the cluster has been deployed.</p><h3 id=aws-privatelink-networking>AWS PrivateLink Networking</h3><p>ROSA provides 3 network deployment patterns: public, private and PrivateLink. Choosing the PrivateLink option provides the most secure configuration and is recommended for customers with sensitive workloads or strict compliance requirements. The PrivateLink option uses <a href=https://docs.aws.amazon.com/vpc/latest/privatelink/what-is-privatelink.html>AWS PrivateLink</a> to allow Red Hat Site Reliability Engineering (SRE) teams to manage the cluster using a private subnet connected to the cluster&rsquo;s PrivateLink endpoint in an existing VPC.</p><p><img src=./rosa-privatelink.svg alt=private-link></p><p>When using the PrivateLink model, a VPC with Private Subnets must exist in the AWS account where ROSA will be deployed. The subnets are provided to the installer via CLI flags.</p><p>Details on the PrivateLink Architecture can be found in the Red Hat and AWS documentation:</p><ul><li><a href=https://docs.openshift.com/rosa/rosa_architecture/rosa_architecture_sub/rosa-architecture-models.html#osd-aws-privatelink-architecture.adoc_rosa-architecture-models>ROSA PrivateLink Architecture</a></li><li><a href=https://docs.openshift.com/rosa/rosa_install_access_delete_clusters/rosa-aws-privatelink-creating-cluster.html>ROSA PrivateLink Prerequisites</a></li><li><a href=https://docs.openshift.com/rosa/rosa_planning/rosa-sts-aws-prereqs.html#osd-aws-privatelink-firewall-prerequisites_rosa-sts-aws-prereqs>Firewall Egress Requirements</a></li><li><a href=https://docs.aws.amazon.com/ROSA/latest/userguide/getting-started-private-link.html>Deploy a VPC and PrivateLink Cluster</a></li></ul><h3 id=aws-security-token-service-sts-mode>AWS Security Token Service (STS) Mode</h3><p>There are two supported methods for providing AWS permissions to ROSA:</p><ul><li>Using static IAM user credentials with AdministratorAccess policy - “ROSA with IAM Users” (not recommended)</li><li>Using AWS Security Token Service (STS) with short-lived, dynamic tokens (preferred) - “ROSA with STS”</li></ul><p>The STS method uses least-privilege predefined roles and policies to grant ROSA minimal permissions in the AWS account for the service to operate and is the recommended option.</p><p>As stated in the <a href=https://docs.aws.amazon.com/STS/latest/APIReference/welcome.html>AWS documentation</a> AWS STS “enables you to request temporary, limited-privilege credentials for AWS Identity and Access Management (IAM) users or for users you authenticate (federated users)”. In this case, AWS STS can be used to grant the ROSA service, limited, short-term access, to resources in your AWS account. After these credentials expire (typically an hour after being requested), they are no longer recognized by AWS and they no longer have any kind of account access from API requests made with them.</p><p>Details on ROSA with STS can be found in Red Hat documentation and blogs:</p><ul><li><a href=https://cloud.redhat.com/blog/what-is-aws-sts-and-how-does-red-hat-openshift-service-on-aws-rosa-use-sts>ROSA with STS Explained</a></li><li><a href=https://docs.openshift.com/rosa/rosa_planning/rosa-sts-aws-prereqs.html>AWS prerequisites for ROSA with STS</a></li><li><a href=https://docs.openshift.com/rosa/rosa_architecture/rosa-sts-about-iam-resources.html>IAM Resources for Clusters that Use STS</a></li></ul><h3 id=customer-supplied-kms-key>Customer-Supplied KMS Key</h3><p>By default, ROSA encrypts all <a href=https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AmazonEBS.html>Elastic Block Store (EBS)</a> volumes used for node storage and Persistent Volumes (PVs) with an AWS-managed <a href=https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html>Key Management Service (KMS)</a> key.</p><p>Using a <a href=https://docs.aws.amazon.com/kms/latest/developerguide/concepts.html#key-mgmt>Customer Managed KMS</a> key allows you to have full control over the KMS key including key policies, key rotation and deletion.</p><p>To configure a cluster with a custom KMS Key, consider the following references:</p><ul><li><a href=https://docs.openshift.com/rosa/rosa_install_access_delete_clusters/rosa-sts-creating-a-cluster-with-customizations.html#rosa-sts-creating-cluster-customizations_rosa-sts-creating-a-cluster-with-customizations>ROSA STS Customizations</a></li><li><a href=https://mobb.ninja/docs/rosa/kms/>Deploy ROSA with a Custom KMS Key</a></li></ul><h3 id=multi-availability-zone>Multi-Availability Zone</h3><p>ROSA clusters that will be used for production workloads should be deployed across multiple availability zones. In this configuration, control plane nodes are distributed across availability zones and at least one worker node is required in each availability zone.</p><p>This provides the highest level of fault tolerance and protects against the loss of a single availability zone in an AWS region.</p><h3 id=deploy-the-day-1-rosa-sra-via-rosa-cli>Deploy the Day 1 ROSA SRA via ROSA CLI</h3><p>The Day 1 ROSA SRA can be deployed quickly using the AWS CLI and the ROSA CLI. To deploy the cluster, the following prerequisites must be met:</p><ul><li>AWS Account:<ul><li>Access to an AWS account with <a href=https://docs.openshift.com/rosa/rosa_architecture/rosa-sts-about-iam-resources.html>sufficient permissions</a> to deploy a ROSA cluster.</li><li>If using AWS Organizations and Service Control Policies (SCPs), the SCPs must not be more restrictive than the minimum permissions required to operate the service.</li><li><a href=https://docs.openshift.com/rosa/rosa_planning/rosa-sts-required-aws-service-quotas.html#rosa-sts-required-aws-service-quotas>Sufficient quota</a> to support the cluster deployment.</li></ul></li><li>Networking: An AWS VPC, with 3 private subnets across 3 availability zones and outbound internet access. Make note of the AWS VPC Subnet IDs as they will be needed for the installer.</li><li>Tooling:<ul><li><a href=https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html>AWS CLI</a></li><li><a href=https://github.com/openshift/rosa/releases/tag/v1.2.6>ROSA CLI</a> v1.2.6</li></ul></li></ul><h4 id=prepare-the-rosa-workload-account>Prepare the ROSA Workload Account</h4><p>Log in to the AWS account with a user that has been assigned AdministratorAccess and run the following command using the <code>aws</code> CLI:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>export AWS_REGION<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ca-central-1&#34;</span>
</span></span><span style=display:flex><span>aws iam create-service-linked-role --aws-service-name <span style=color:#e6db74>&#34;elasticloadbalancing.amazonaws.com&#34;</span>
</span></span></code></pre></div><h4 id=create-the-required-rosa-account-roles>Create the required ROSA Account Roles</h4><p>Creation of the account roles is a one-time activity, create them with the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>rosa create account-roles --mode auto -y
</span></span></code></pre></div><h4 id=create-the-required-kms-key-and-initial-policy>Create the Required KMS Key and Initial Policy</h4><p>The custom KMS key is used to encrypt EC2 EBS node volumes and the EBS volumes that are created by the default <code>StorageClass</code> on OpenShift.</p><p>Create a new Symmetric KMS Key for EBS Encryption:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>KMS_ARN<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>aws kms create-key --region $AWS_REGION --description <span style=color:#e6db74>&#39;rosa-ebs-key&#39;</span> --query KeyMetadata.Arn --output text<span style=color:#66d9ef>)</span>
</span></span></code></pre></div><p>Generate the necessary key policy to allow the ROSA STS roles to access the key. Use the below command to populate a sample policy, or create your own.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>AWS_ACCOUNT<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>aws sts get-caller-identity --query Account --output text<span style=color:#66d9ef>)</span>; cat <span style=color:#e6db74>&lt;&lt; EOF &gt; rosa-key-policy.json
</span></span></span><span style=display:flex><span><span style=color:#e6db74>{
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;Version&#34;: &#34;2012-10-17&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;Id&#34;: &#34;rosa-key-policy-1&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;Statement&#34;: [
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Sid&#34;: &#34;Enable IAM User Permissions&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Effect&#34;: &#34;Allow&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Principal&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;AWS&#34;: &#34;arn:aws:iam::${AWS_ACCOUNT}:root&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            },
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Action&#34;: &#34;kms:*&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Resource&#34;: &#34;*&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        },
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Sid&#34;: &#34;Allow ROSA use of the key&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Effect&#34;: &#34;Allow&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Principal&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;AWS&#34;: [
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;arn:aws:iam::${AWS_ACCOUNT}:role/ManagedOpenShift-Support-Role&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;arn:aws:iam::${AWS_ACCOUNT}:role/ManagedOpenShift-Installer-Role&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;arn:aws:iam::${AWS_ACCOUNT}:role/ManagedOpenShift-Worker-Role&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;arn:aws:iam::${AWS_ACCOUNT}:role/ManagedOpenShift-ControlPlane-Role&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                ]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            },
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Action&#34;: [
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;kms:Encrypt&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;kms:Decrypt&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;kms:ReEncrypt*&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;kms:GenerateDataKey*&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;kms:DescribeKey&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            ],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Resource&#34;: &#34;*&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        },
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Sid&#34;: &#34;Allow attachment of persistent resources&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Effect&#34;: &#34;Allow&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Principal&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;AWS&#34;: [
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;arn:aws:iam::${AWS_ACCOUNT}:role/ManagedOpenShift-Support-Role&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;arn:aws:iam::${AWS_ACCOUNT}:role/ManagedOpenShift-Installer-Role&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;arn:aws:iam::${AWS_ACCOUNT}:role/ManagedOpenShift-Worker-Role&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;arn:aws:iam::${AWS_ACCOUNT}:role/ManagedOpenShift-ControlPlane-Role&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                ]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            },
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Action&#34;: [
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;kms:CreateGrant&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;kms:ListGrants&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;kms:RevokeGrant&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            ],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Resource&#34;: &#34;*&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Condition&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;Bool&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;kms:GrantIsForAWSResource&#34;: &#34;true&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    ]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><p>Apply the newly generated key policy to the custom KMS key.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>aws kms put-key-policy --key-id $KMS_ARN <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--policy file://rosa-key-policy.json <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--policy-name default
</span></span></code></pre></div><h4 id=deploy-a-multi-az-single-subnet-privatelink-sts-rosa-cluster>Deploy a multi-AZ, single subnet, PrivateLink, STS ROSA cluster</h4><p>To deploy the cluster, you must gather the following info:</p><ul><li><code>--subnet-ids</code>: AWS subnet IDs that the cluster will be deployed in</li><li><code>--machine-cidr</code>: The VPC CIDR</li></ul><p>Deploy the cluster with the following command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>ROSA_CLUSTER_NAME<span style=color:#f92672>=</span>rosa-ct1
</span></span><span style=display:flex><span>rosa create cluster --cluster-name $ROSA_CLUSTER_NAME --sts --private-link <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--region ca-central-1 --version 4.11.4 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--machine-cidr 10.0.0.0/20 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--subnet-ids subnet-058aa558a63da3d51,subnet-058aa558a63da3d52,subnet-058aa558a63da3d53 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--enable-customer-managed-key --kms-key-arn $KMS_ARN -y --mode auto
</span></span></code></pre></div><p>To complete the KMS key policy, you must retrieve the Cluster CSI and Machine API operator role names:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>rosa describe cluster -c $ROSA_CLUSTER_NAME
</span></span></code></pre></div><p>The operator role names will be similar to:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-text data-lang=text><span style=display:flex><span>arn:aws:iam::${AWS_ACCOUNT}:role/&lt;CLUSTERNAME&gt;-&lt;IDENTIFIER&gt;-openshift-cluster-csi-drivers-ebs-cloud-credenti
</span></span><span style=display:flex><span>arn:aws:iam::${AWS_ACCOUNT}:role/&lt;CLUSTERNAME&gt;-&lt;IDENTIFIER&gt;-openshift-machine-api-aws-cloud-credentials
</span></span></code></pre></div><p>Replace the role names in the following script with your <strong>EXACT</strong> Operator Role names:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>AWS_ACCOUNT<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>aws sts get-caller-identity --query Account --output text<span style=color:#66d9ef>)</span>; cat <span style=color:#e6db74>&lt;&lt; EOF &gt; rosa-key-policy.json
</span></span></span><span style=display:flex><span><span style=color:#e6db74>{
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;Version&#34;: &#34;2012-10-17&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;Id&#34;: &#34;rosa-key-policy-1&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#34;Statement&#34;: [
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Sid&#34;: &#34;Enable IAM User Permissions&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Effect&#34;: &#34;Allow&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Principal&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;AWS&#34;: &#34;arn:aws:iam::${AWS_ACCOUNT}:root&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            },
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Action&#34;: &#34;kms:*&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Resource&#34;: &#34;*&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        },
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Sid&#34;: &#34;Allow ROSA use of the key&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Effect&#34;: &#34;Allow&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Principal&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;AWS&#34;: [
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;arn:aws:iam::${AWS_ACCOUNT}:role/ROSA-Support-Role&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;arn:aws:iam::${AWS_ACCOUNT}:role/ROSA-Installer-Role&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;arn:aws:iam::${AWS_ACCOUNT}:role/ROSA-Worker-Role&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;arn:aws:iam::${AWS_ACCOUNT}:role/&lt;CLUSTERNAME&gt;-&lt;IDENTIFIER&gt;-openshift-cluster-csi-drivers-ebs-cloud-credent&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;arn:aws:iam::${AWS_ACCOUNT}:role/&lt;CLUSTERNAME&gt;-&lt;IDENTIFIER&gt;-openshift-machine-api-aws-cloud-credentials&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                ]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            },
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Action&#34;: [
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;kms:Encrypt&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;kms:Decrypt&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;kms:ReEncrypt*&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;kms:GenerateDataKey*&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;kms:DescribeKey&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            ],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Resource&#34;: &#34;*&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        },
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Sid&#34;: &#34;Allow attachment of persistent resources&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Effect&#34;: &#34;Allow&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Principal&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;AWS&#34;: [
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;arn:aws:iam::${AWS_ACCOUNT}:role/ROSA-Support-Role&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;arn:aws:iam::${AWS_ACCOUNT}:role/ROSA-Installer-Role&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;arn:aws:iam::${AWS_ACCOUNT}:role/ROSA-Worker-Role&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;arn:aws:iam::${AWS_ACCOUNT}:role/ROSA-ControlPlane-Role&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;arn:aws:iam::${AWS_ACCOUNT}:role/&lt;CLUSTERNAME&gt;-&lt;IDENTIFIER&gt;-openshift-cluster-csi-drivers-ebs-cloud-credent&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;arn:aws:iam::${AWS_ACCOUNT}:role/&lt;CLUSTERNAME&gt;-&lt;IDENTIFIER&gt;-openshift-machine-api-aws-cloud-credentials&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                ]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            },
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Action&#34;: [
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;kms:CreateGrant&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;kms:ListGrants&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;kms:RevokeGrant&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            ],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Resource&#34;: &#34;*&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;Condition&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                &#34;Bool&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                    &#34;kms:GrantIsForAWSResource&#34;: &#34;true&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    ]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>}
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><p>Apply the newly updated key policy to the custom KMS key.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>aws kms put-key-policy --key-id $KMS_ARN <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--policy file://rosa-key-policy.json <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>--policy-name default
</span></span></code></pre></div><p>After creating the operator roles, create the required OIDC provider:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span>rosa create oidc-provider --mode auto --cluster $ROSA_CLUSTER_NAME
</span></span></code></pre></div><p>Wait for the cluster deployment to finish.</p><h2 id=rosa-day-2-security-and-operations>ROSA Day 2 Security and Operations</h2><p>This section of the SRA describes tasks that are completed once the cluster has been deployed. These configurations enhance the security of the cluster and are often requirements for customers operating in regulated environments.</p><h3 id=configure-an-identity-provider>Configure an Identity Provider</h3><p>ROSA provides an easy way to access clusters immediately after deployment through the creation of a <code>cluster-admin</code> user through the ROSA CLI. This method creates an HTPASSWORD identity provider on the cluster. This is good if you need quick access to the cluster, but should not be used for clusters that will host any workloads.</p><p>The recommended approach is to use a formal identity provider (IDP) to access the cluster (and then grant that user admin privileges, if desired).</p><p>ROSA supports several commercially available IDPs and common protocols. The full listing can be found in the ROSA documentation:</p><ul><li><a href=https://docs.openshift.com/rosa/rosa_install_access_delete_clusters/rosa-sts-config-identity-providers.html#understanding-idp-supported_rosa-sts-config-identity-providers>https://docs.openshift.com/rosa/rosa_install_access_delete_clusters/rosa-sts-config-identity-providers.html#understanding-idp-supported_rosa-sts-config-identity-providers</a></li></ul><p>Some examples of how to configure an IDP can be found on the <code>mobb.ninja</code> website:</p><ul><li><a href=https://mobb.ninja/docs/idp/azuread>Configure Azure AD as an identity provider for ROSA/OSD</a></li><li><a href=https://mobb.ninja/docs/idp/gitlab>Configure GitLab as an identity provider for ROSA/OSD</a></li><li><a href=https://mobb.ninja/docs/idp/group-claims/rosa/>Configure Azure AD as an identity provider for ROSA with group claims</a></li></ul><h3 id=configure-cloudwatch-log-forwarding>Configure CloudWatch Log Forwarding</h3><p>ROSA does not provide persistent logging by default, but it can be enabled through the <code>cluster-logging</code> operator from the OpenShift Marketplace. This add-on service offers an optional application log-forwarding solution based on AWS CloudWatch. This logging solution can be installed after the ROSA cluster is provisioned.</p><p>To capture all logging events in AWS CloudWatch, all three log types should be enabled:</p><ul><li><strong>Applications logs</strong>: Permits the Operator to collect application logs, which includes everything that is not deployed in the <code>openshift-</code>, <code>kube-</code>, and default namespaces.</li><li><strong>Infrastructure logs</strong>: Permits the Operator to collect logs from OpenShift Container Platform, Kubernetes, and some nodes.</li><li><strong>Audit logs</strong>: Permits the Operator to collect node logs related to security audits. By default, Red Hat stores audit logs outside the cluster through a separate mechanism that does not rely on the Cluster Logging Operator. For more information about default audit logging, see the ROSA Service Definition.</li></ul><p>After the operator has been enabled the logs can be viewed in the AWS Console, and persistently stored based on the CloudWatch configuration of the AWS Account.</p><p>The cluster-logging operator has the following limits when configured for CloudWatch log forwarding:</p><table><thead><tr><th><strong>Message Size (bytes)</strong></th><th><strong>Maximum logging rate (messages/second/node)</strong></th></tr></thead><tbody><tr><td>512</td><td>1,000</td></tr><tr><td>1,024</td><td>650</td></tr><tr><td>2,048</td><td>450</td></tr></tbody></table><p>Details on this configuration can be found at the following links:</p><ul><li><a href=https://mobb.ninja/docs/rosa/clf-cloudwatch-sts/>Configuring the Cluster Log Forwarder for CloudWatch Logs and STS</a></li><li><a href=https://docs.openshift.com/rosa/rosa_cluster_admin/rosa_logging/rosa-viewing-logs.html>Viewing cluster logs in the AWS Console</a></li></ul><h3 id=configure-custom-ingress-tls-profile>Configure Custom Ingress TLS Profile</h3><p>By default, ROSA supports multiple versions of TLS on the Ingress COntrollers used for applications to support the broadest set of clients and libraries. To support specific versions of TLS, the <code>tlsSecurityProfile</code> value on cluster ingress controllers can be modified.</p><p>Review the OpenShift Documentation that explains the options for the <code>tlsSecurityProfile</code> to determine which profile meets your organization&rsquo;s needs. By default, ingress controllers are configured to use the Intermediate profile, which corresponds to the Intermediate Mozilla profile:</p><ul><li><a href=https://docs.openshift.com/container-platform/4.11/networking/ingress-operator.html#configuring-ingress-controller-tls>OpenShift documentation on tlsSecurityProfile</a></li><li><a href=https://wiki.mozilla.org/Security/Server_Side_TLS#Intermediate_compatibility_.28recommended.29>Intermediate Mozilla Profile</a></li></ul><p>The <code>tlsSecurityProfile</code> can be modified by following these instructions:</p><ul><li><a href=https://mobb.ninja/docs/ingress/tls-cipher-customization/>Configure ROSA/OSD to use custom TLS ciphers on the ingress controllers</a></li></ul><h3 id=compliance-operator>Compliance Operator</h3><p>The Compliance Operator lets ROSA administrators describe the required compliance state of a cluster and provides them with an overview of gaps and ways to remediate them. The Compliance Operator assesses compliance of both the Kubernetes API resources of ROSA, as well as the nodes running the cluster. The Compliance Operator uses OpenSCAP, a NIST-certified tool, to scan and enforce security policies provided by the content.</p><p>There are several profiles available as part of the Compliance Operator installation. These profiles represent different compliance benchmarks. Each profile has the product name that it applies to added as a prefix to the profile’s name. <code>ocp4-e8</code> applies the Essential 8 benchmark to the OpenShift Container Platform product, while <code>rhcos4-e8</code> applies the Essential 8 benchmark to the Red Hat Enterprise Linux CoreOS (RHCOS) product.</p><blockquote><p><strong>Important note:</strong> The compliance benchmarks are continuously updated and maintained by Red Hat based on each control profile. ROSA-specific benchmarks are under development to account for the managed service components.</p></blockquote><p>To understand and install the compliance operator, read the Red Hat documentation:</p><ul><li><a href=https://docs.openshift.com/container-platform/4.11/security/compliance_operator/compliance-operator-installation.html>Installing the Compliance Operator</a></li><li><a href=https://docs.openshift.com/container-platform/4.11/security/compliance_operator/compliance-operator-understanding.html>Understanding the Compliance Operator</a></li><li><a href=https://docs.openshift.com/container-platform/4.11/security/compliance_operator/compliance-operator-supported-profiles.html>Supported compliance profiles</a></li></ul><h3 id=openshift-service-mesh>OpenShift Service Mesh</h3><p>Red Hat OpenShift Service Mesh addresses a variety of problems in a microservice architecture by creating a centralized point of control in an application. It adds a transparent layer on existing distributed applications without requiring any changes to the application code.</p><p>Red Hat OpenShift Service Mesh provides a number of key capabilities uniformly across a network of services:</p><ul><li><strong>Traffic Management</strong> - Control the flow of traffic and API calls between services, make calls more reliable, and make the network more robust in the face of adverse conditions.</li><li><strong>Service Identity and Security</strong> - Provide services in the mesh with a verifiable identity and provide the ability to protect service traffic as it flows over networks of varying degrees of trustworthiness.</li><li><strong>Policy Enforcement</strong> - Apply an organizational policy to the interaction between services, ensure access policies are enforced and resources are fairly distributed among consumers. Policy changes are made by configuring the mesh, not by changing application code.</li><li><strong>Telemetry</strong> - Gain an understanding of the dependencies between services and the nature and flow of traffic between them, providing the ability to quickly identify issues.</li></ul><p>To learn more about OpenSHift Service Mesh and to install the Service Mesh, read the OpenShift documentation:</p><ul><li><a href=https://docs.openshift.com/container-platform/4.11/service_mesh/v2x/ossm-architecture.html>Understanding Service Mesh</a></li><li><a href=https://docs.openshift.com/container-platform/4.11/service_mesh/v2x/installing-ossm.html>Installing the Service Mesh Operator</a></li><li><a href=https://docs.openshift.com/container-platform/4.11/service_mesh/v2x/ossm-create-mesh.html>Adding workloads to the Service Mesh</a></li><li><a href=https://docs.openshift.com/container-platform/4.11/service_mesh/v2x/ossm-security.html>Service Mesh Security</a></li></ul><h3 id=backup-and-restore--disaster-recovery>Backup and Restore / Disaster Recovery</h3><p>An important part of any platform used to host business and user workloads is data protection. Data protection may include operations including on-demand backup, scheduled backup and restore. These operations allow the objects within a cluster to be backed up to a storage provider, either locally or on a public cloud and restore that cluster from the backup in the event of a failure or scheduled maintenance.</p><p>As part of the Shared Responsibility Model for ROSA, consumers of the service are responsible for backing up cluster and application data when the STS option is used. To implement a backup and disaster recovery solution, administrators can use OpenShift APIs for Data Protection (OADP). OADP is an operator that Red Hat has created to create backup and restore APIs in the OpenShift cluster. OADP provides the following APIs:</p><ul><li>Backup</li><li>Restore</li><li>Schedule</li><li>BackupStorageLocation</li><li>VolumeSnapshotLocation</li></ul><p>You can learn how to install and use OADP from the following resources:</p><ul><li><a href=https://docs.openshift.com/container-platform/4.11/backup_and_restore/application_backup_and_restore/oadp-features-plugins.html>OADP features and plug-ins</a></li><li><a href=https://mobb.ninja/docs/misc/oadp/rosa-sts/>Deploying OpenShift Advanced Data Protection on a ROSA cluster</a></li></ul><h3 id=configure-aws-waf-and-cloudfront-for-application-ingress>Configure AWS WAF and CloudFront for Application Ingress</h3><p>ROSA does not provide advanced firewall or DDoS protection by default, however, this can easily be achieved by combining three AWS services to protect the cluster and applications:</p><ul><li><strong>AWS WAF</strong> is a web application firewall that helps protect web applications from attacks by allowing you to configure rules that allow, block, or monitor (count) web requests based on conditions that you define. These conditions include IP addresses, HTTP headers, HTTP body, URI strings, SQL injection and cross-site scripting.</li><li><strong>Amazon CloudFront</strong> is a web service that gives businesses and web application developers an easy and cost effective way to distribute content with low latency and high data transfer speeds.</li><li><strong>AWS Shield</strong> is a managed service that provides protection against Distributed Denial of Service (DDoS) attacks for applications running on AWS.</li></ul><p>To learn more about these services and how to configure them for ROSA, read the documentation below:</p><ul><li><a href=https://aws.amazon.com/waf/faqs/>AWS WAF FAQ</a></li><li><a href=https://aws.amazon.com/cloudfront/faqs/>Amazon CloudFront FAQ</a></li><li><a href=https://aws.amazon.com/shield/faqs/>AWS Shield FAQ</a></li><li><a href=https://mobb.ninja/docs/aws/waf/cloud-front.html>Using CloudFront + WAF on ROSA</a></li><li><a href=https://mobb.ninja/docs/aws/waf/alb.html>Using ALB + WAF on ROSA</a></li></ul><h3 id=use-and-store-secrets-securely-in-aws>Use and Store Secrets Securely in AWS</h3><p>Kubernetes Secrets are insecure by default, this is described in the Kubernetes documentation:</p><blockquote><p>Kubernetes Secrets are, by default, stored unencrypted in the API server&rsquo;s underlying data store (etcd). This design is not unique to ROSA and affects all Kubernetes distributions. Anyone with API access can retrieve or modify a Secret, and so can anyone with access to etcd. Additionally, anyone who is authorized to create a Pod in a namespace can use that access to read any Secret in that namespace; this includes indirect access such as the ability to create a Deployment.</p></blockquote><p>Customers looking for secure ways to manage application secrets often chose to use a third-party tool to manage secrets due to this behavior.</p><p>The AWS Secrets and Configuration Provider (ASCP) provides a way to expose AWS Secrets as Kubernetes storage volumes. With the ASCP, you can store and manage your secrets in AWS Secrets Manager and then retrieve them through your workloads running on ROSA.</p><p>This is made even easier / more secure through the use of AWS STS and Kubernetes PodIdentity.</p><p>To use the AWS Secrets Manager CSI with ROSA and STS, follow this guide:</p><ul><li><a href=https://mobb.ninja/docs/rosa/aws-secrets-manager-csi/>Using AWS Secrets Manager CSI on Red Hat OpenShift on AWS with STS</a></li></ul><h3 id=provide-external-persistent-storage-to-applications-on-rosa>Provide External Persistent Storage to Applications on ROSA</h3><p>ROSA supports both Amazon Elastic Block Storage (EBS) and Elastic File Storage (EFS) for persistent application data.</p><p>When applications require ReadWriteMany capabilities, or when multiple applications must read the same data, EFS should be used.</p><p>With the release of OpenShift 4.10 the EFS CSI Driver is now GA and available.</p><p>To learn more, or to install the EFS CSI driver, review the following documentation:</p><ul><li><a href=https://docs.openshift.com/rosa/storage/persistent_storage/osd-persistent-storage-aws.html>Persistent Storage using EFS</a></li><li><a href=https://docs.openshift.com/rosa/storage/persistent_storage/rosa-persistent-storage-aws-ebs.html>Persistent Storage using EBS</a></li><li><a href=https://mobb.ninja/docs/rosa/aws-efs-csi-operator-sts/>Enabling the AWS EFS CSI Driver Operator on ROSA</a></li></ul><footer class=footline></footer></article></div></main></div><aside id=sidebar class=default-animation><div id=header-wrapper class=default-animation><div id=header class=default-animation><style>#logo svg,#logo svg *{color:#282828;color:var(--MENU-SECTIONS-BG-color);fill:#282828!important;fill:var(--MENU-SECTIONS-BG-color)!important;opacity:.945}a#logo{color:#282828;color:var(--MENU-SECTIONS-BG-color);font-family:work sans,helvetica,tahoma,geneva,arial,sans-serif;font-size:30px;font-weight:300;margin-top:-13px;max-width:80%;text-transform:uppercase;width:226px;white-space:nowrap}a#logo:hover{color:#282828;color:var(--MENU-SECTIONS-BG-color)}#logo svg{margin-bottom:-20px;margin-left:-23.5px;width:40.5%}@media only all and (max-width:59.938em){a#logo{font-size:25px;margin-top:-3px}#logo svg{margin-bottom:-12px;margin-left:-23px}}@media all and (-ms-high-contrast:none){a#logo{margin-top:-58px}#logo svg{margin-bottom:-62px}}</style><a id=logo href=https://mobb.ninja/><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M341.52 285.56c33.65.0 82.34-6.94 82.34-47 .22-6.74.86-1.82-20.88-96.24-4.62-19.15-8.68-27.84-42.31-44.65-26.09-13.34-82.92-35.37-99.73-35.37-15.66.0-20.2 20.17-38.87 20.17-18 0-31.31-15.06-48.12-15.06-16.14.0-26.66 11-34.78 33.62-27.5 77.55-26.28 74.27-26.12 78.27.0 24.8 97.64 106.11 228.47 106.11M429 254.84c4.65 22 4.65 24.35 4.65 27.25.0 37.66-42.33 58.56-98 58.56-125.74.08-235.91-73.65-235.91-122.33a49.55 49.55.0 014.06-19.72C58.56 200.86.0 208.93.0 260.63c0 84.67 200.63 189 359.49 189 121.79.0 152.51-55.08 152.51-98.58.0-34.21-29.59-73.05-82.93-96.24"/></svg>MOBB Ninja</a></div><div class="searchbox default-animation"><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script>var contentLangs=["en"]</script><script src=https://mobb.ninja/js/auto-complete.js?1673631443 defer></script>
<script src=https://mobb.ninja/js/lunr.min.js?1673631443 defer></script>
<script src=https://mobb.ninja/js/lunr.stemmer.support.min.js?1673631443 defer></script>
<script src=https://mobb.ninja/js/lunr.multi.min.js?1673631443 defer></script>
<script src=https://mobb.ninja/js/lunr.en.min.js?1673631443 defer></script>
<script src=https://mobb.ninja/js/search.js?1673631443 defer></script></div><div id=homelinks class=default-animation><ul><li><a class=padding href=https://mobb.ninja/><i class="fas fa-home"></i> Home</a></li></ul></div><div id=content-wrapper class=highlightable><ul class="topics collapsible-menu"><li data-nav-id=/docs/ title="Documentation from the MOBB" class="dd-item parent"><input type=checkbox id=section-2f67fdc9a362fd86f1cfd4450ed56551 class=toggle checked><label for=section-2f67fdc9a362fd86f1cfd4450ed56551></label><a href=https://mobb.ninja/docs/>Documentation from the MOBB</a><ul><li data-nav-id=/docs/quickstart-aro/ title="ARO Quickstart" class=dd-item><a href=https://mobb.ninja/docs/quickstart-aro/>ARO Quickstart</a></li><li data-nav-id=/docs/quickstart-rosa/ title="ROSA Quickstart" class=dd-item><a href=https://mobb.ninja/docs/quickstart-rosa/>ROSA Quickstart</a></li><li data-nav-id=/docs/aro/ title="Azure Red Hat OpenShift" class=dd-item><input type=checkbox id=section-ea9c20146e4edb7d3dc5cab0ddc4bd3a class=toggle><label for=section-ea9c20146e4edb7d3dc5cab0ddc4bd3a></label><a href=https://mobb.ninja/docs/aro/>Azure Red Hat OpenShift</a><ul><li data-nav-id=/docs/aro/shipping-logs-and-metrics-to-azure-blob/ title="Azure Red Hat Openshift - Shippings logs and metrics to Azure Blob storage" class=dd-item><a href=https://mobb.ninja/docs/aro/shipping-logs-and-metrics-to-azure-blob/>Azure Red Hat Openshift - Shippings logs and metrics to Azure Blob storage</a></li><li data-nav-id=/docs/aro/registry/ title="Accessing the Internal Registry from ARO" class=dd-item><a href=https://mobb.ninja/docs/aro/registry/>Accessing the Internal Registry from ARO</a></li><li data-nav-id=/docs/aro/additional-ingress-controller/ title="Adding an additional ingress controller to an ARO cluster" class=dd-item><a href=https://mobb.ninja/docs/aro/additional-ingress-controller/>Adding an additional ingress controller to an ARO cluster</a></li><li data-nav-id=/docs/aro/add-infra-nodes/ title="Adding infrastructure nodes to an ARO cluster" class=dd-item><a href=https://mobb.ninja/docs/aro/add-infra-nodes/>Adding infrastructure nodes to an ARO cluster</a></li><li data-nav-id=/docs/aro/azure-policy/ title="Apply Azure Policy to Azure Policy" class=dd-item><a href=https://mobb.ninja/docs/aro/azure-policy/>Apply Azure Policy to Azure Policy</a></li><li data-nav-id=/docs/aro/disaster-recovery/ title="ARO - Considerations for Disaster Recovery" class=dd-item><a href=https://mobb.ninja/docs/aro/disaster-recovery/>ARO - Considerations for Disaster Recovery</a></li><li data-nav-id=/docs/aro/cert-manager/ title="ARO Custom domain with cert-manager and LetsEncrypt" class=dd-item><a href=https://mobb.ninja/docs/aro/cert-manager/>ARO Custom domain with cert-manager and LetsEncrypt</a></li><li data-nav-id=/docs/aro/ibm-cloud-paks-for-data/ title="ARO IBM Cloud Paks 4 Data" class=dd-item><a href=https://mobb.ninja/docs/aro/ibm-cloud-paks-for-data/>ARO IBM Cloud Paks 4 Data</a></li><li data-nav-id=/docs/aro/gpu/ title="ARO with Nvidia GPU Workloads" class=dd-item><a href=https://mobb.ninja/docs/aro/gpu/>ARO with Nvidia GPU Workloads</a></li><li data-nav-id=/docs/aro/frontdoor/ title="Azure Front Door with ARO ( Azure Red Hat OpenShift )" class=dd-item><a href=https://mobb.ninja/docs/aro/frontdoor/>Azure Front Door with ARO ( Azure Red Hat OpenShift )</a></li><li data-nav-id=/docs/aro/azure-service-operator/ title="Azure Service Operator" class=dd-item><input type=checkbox id=section-c4973928d95ad0b6b86b8742709cea9d class=toggle><label for=section-c4973928d95ad0b6b86b8742709cea9d></label><a href=https://mobb.ninja/docs/aro/azure-service-operator/>Azure Service Operator</a><ul><li data-nav-id=/docs/aro/azure-service-operator/v1/ title="Azure Service Operator V1 in ARO" class=dd-item><a href=https://mobb.ninja/docs/aro/azure-service-operator/v1/>Azure Service Operator V1 in ARO</a></li><li data-nav-id=/docs/aro/azure-service-operator/v2/ title="Azure Service Operator V2 in ARO" class=dd-item><a href=https://mobb.ninja/docs/aro/azure-service-operator/v2/>Azure Service Operator V2 in ARO</a></li></ul></li><li data-nav-id=/docs/aro/managed-upgrade-operator/ title="Enable the Managed Upgrade Operator in ARO and schedule Upgrades" class=dd-item><a href=https://mobb.ninja/docs/aro/managed-upgrade-operator/>Enable the Managed Upgrade Operator in ARO and schedule Upgrades</a></li><li data-nav-id=/docs/aro/federated-metrics/ title="Federating System and User metrics to Azure Files in Azure Red Hat OpenShift" class=dd-item><a href=https://mobb.ninja/docs/aro/federated-metrics/>Federating System and User metrics to Azure Files in Azure Red Hat OpenShift</a></li><li data-nav-id=/docs/aro/aro-machinesets/readme/ title="Helm Chart to set up extra MachineSets on ARO clusters" class=dd-item><a href=https://mobb.ninja/docs/aro/aro-machinesets/readme/>Helm Chart to set up extra MachineSets on ARO clusters</a></li><li data-nav-id=/docs/aro/astronomer/ title="Installing Astronomer on a private ARO cluster" class=dd-item><a href=https://mobb.ninja/docs/aro/astronomer/>Installing Astronomer on a private ARO cluster</a></li><li data-nav-id=/docs/aro/azure-arc-integration/ title="Integrating Azure ARC with ARO" class=dd-item><a href=https://mobb.ninja/docs/aro/azure-arc-integration/>Integrating Azure ARC with ARO</a></li><li data-nav-id=/docs/aro/odf/ title="OpenShift Data Foundation with ARO" class=dd-item><a href=https://mobb.ninja/docs/aro/odf/>OpenShift Data Foundation with ARO</a></li><li data-nav-id=/docs/aro/private-cluster/ title="Private ARO Cluster with access via JumpHost" class=dd-item><a href=https://mobb.ninja/docs/aro/private-cluster/>Private ARO Cluster with access via JumpHost</a></li><li data-nav-id=/docs/aro/setup-quay/ title="Quay on ARO" class=dd-item><input type=checkbox id=section-107cd49f6d91378e87d08e36d5f67445 class=toggle><label for=section-107cd49f6d91378e87d08e36d5f67445></label><a href=https://mobb.ninja/docs/aro/setup-quay/>Quay on ARO</a><ul><li data-nav-id=/docs/aro/setup-quay/quay-cli/ title="Setting up Quay on an ARO cluster via CLI" class=dd-item><a href=https://mobb.ninja/docs/aro/setup-quay/quay-cli/>Setting up Quay on an ARO cluster via CLI</a></li><li data-nav-id=/docs/aro/setup-quay/quay-console/ title="Setting up Quay on an ARO cluster via Console" class=dd-item><a href=https://mobb.ninja/docs/aro/setup-quay/quay-console/>Setting up Quay on an ARO cluster via Console</a></li></ul></li><li data-nav-id=/docs/aro/ocm/ title="Registering an ARO cluster to OpenShift Cluster Manager" class=dd-item><a href=https://mobb.ninja/docs/aro/ocm/>Registering an ARO cluster to OpenShift Cluster Manager</a></li><li data-nav-id=/docs/aro/vpn/ title="Setup a VPN Connection into an ARO Cluster with OpenVPN" class=dd-item><a href=https://mobb.ninja/docs/aro/vpn/>Setup a VPN Connection into an ARO Cluster with OpenVPN</a></li><li data-nav-id=/docs/aro/trident/ title="Trident NetApp operator setup for Azure NetApp files" class=dd-item><a href=https://mobb.ninja/docs/aro/trident/>Trident NetApp operator setup for Azure NetApp files</a></li><li data-nav-id=/docs/aro/clf-to-azure/ title="Using Cluster Logging Forwarder in ARO with Azure Monitor" class=dd-item><a href=https://mobb.ninja/docs/aro/clf-to-azure/>Using Cluster Logging Forwarder in ARO with Azure Monitor</a></li><li data-nav-id=/docs/aro/egress-ipam-operator/ title="Using the Egressip Ipam Operator with a Private ARO Cluster" class=dd-item><a href=https://mobb.ninja/docs/aro/egress-ipam-operator/>Using the Egressip Ipam Operator with a Private ARO Cluster</a></li></ul></li><li data-nav-id=/docs/rosa/ title="Red Hat Openshift Service on AWS" class="dd-item parent"><input type=checkbox id=section-d82bea3b793597b6ff01917e2ad59aae class=toggle checked><label for=section-d82bea3b793597b6ff01917e2ad59aae></label><a href=https://mobb.ninja/docs/rosa/>Red Hat Openshift Service on AWS</a><ul><li data-nav-id=/docs/rosa/aws-load-balancer-operator/ title="AWS Load Balancer Operator On ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/aws-load-balancer-operator/>AWS Load Balancer Operator On ROSA</a></li><li data-nav-id=/docs/rosa/clf-cloudwatch-vector/ title="Configuring the Cluster Log Forwarder for CloudWatch Logs using Vector" class=dd-item><a href=https://mobb.ninja/docs/rosa/clf-cloudwatch-vector/>Configuring the Cluster Log Forwarder for CloudWatch Logs using Vector</a></li><li data-nav-id=/docs/rosa/dynamic-certificates/ title="Dynamic Certificates for ROSA Custom Domain" class=dd-item><a href=https://mobb.ninja/docs/rosa/dynamic-certificates/>Dynamic Certificates for ROSA Custom Domain</a></li><li data-nav-id=/docs/rosa/static-ip-load-balancer/ title="Configure a load balancer service to use a static public IP" class=dd-item><a href=https://mobb.ninja/docs/rosa/static-ip-load-balancer/>Configure a load balancer service to use a static public IP</a></li><li data-nav-id=/docs/rosa/verify-permissions/ title="Verify Permissions for ROSA STS Deployment" class=dd-item><a href=https://mobb.ninja/docs/rosa/verify-permissions/>Verify Permissions for ROSA STS Deployment</a></li><li data-nav-id=/docs/rosa/sts-oidc-flow/ title="STS OIDC in ROSA : How it works!" class=dd-item><a href=https://mobb.ninja/docs/rosa/sts-oidc-flow/>STS OIDC in ROSA : How it works!</a></li><li data-nav-id=/docs/rosa/security-ra/ title="Security Reference Architecture for ROSA" class="dd-item active"><a href=https://mobb.ninja/docs/rosa/security-ra/>Security Reference Architecture for ROSA</a></li><li data-nav-id=/docs/rosa/rosa-asea-landing-zone/ title="Integrating ROSA and ASEA Landing Zones" class=dd-item><a href=https://mobb.ninja/docs/rosa/rosa-asea-landing-zone/>Integrating ROSA and ASEA Landing Zones</a></li><li data-nav-id=/docs/rosa/ecr/ title="Configuring a ROSA cluster to pull images from AWS Elastic Container Registry (ECR)" class=dd-item><a href=https://mobb.ninja/docs/rosa/ecr/>Configuring a ROSA cluster to pull images from AWS Elastic Container Registry (ECR)</a></li><li data-nav-id=/docs/rosa/byo-vpc/ title="Creating a Public/Private BYO VPC for ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/byo-vpc/>Creating a Public/Private BYO VPC for ROSA</a></li><li data-nav-id=/docs/rosa/kms/ title="Creating a ROSA cluster in STS mode with custom KMS key" class=dd-item><a href=https://mobb.ninja/docs/rosa/kms/>Creating a ROSA cluster in STS mode with custom KMS key</a></li><li data-nav-id=/docs/rosa/custom-alertmanager/ title="Custom Alerts in ROSA 4.11.x" class=dd-item><a href=https://mobb.ninja/docs/rosa/custom-alertmanager/>Custom Alerts in ROSA 4.11.x</a></li><li data-nav-id=/docs/rosa/ecr-secret-operator/ title="ECR Secret Operator" class=dd-item><input type=checkbox id=section-d622abc3689c39008edcc95bca0300b1 class=toggle><label for=section-d622abc3689c39008edcc95bca0300b1></label><a href=https://mobb.ninja/docs/rosa/ecr-secret-operator/>ECR Secret Operator</a><ul><li data-nav-id=/docs/rosa/ecr-secret-operator/iam_user/ title="Create IAM user and Policy" class=dd-item><a href=https://mobb.ninja/docs/rosa/ecr-secret-operator/iam_user/>Create IAM user and Policy</a></li><li data-nav-id=/docs/rosa/ecr-secret-operator/iam_assume_role/ title="Create STS Assume Role" class=dd-item><a href=https://mobb.ninja/docs/rosa/ecr-secret-operator/iam_assume_role/>Create STS Assume Role</a></li></ul></li><li data-nav-id=/docs/rosa/aws-efs-csi-operator-sts/ title="Enabling the AWS EFS CSI Driver Operator on ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/aws-efs-csi-operator-sts/>Enabling the AWS EFS CSI Driver Operator on ROSA</a></li><li data-nav-id=/docs/rosa/waf/ title="Examples of using a WAF in front of ROSA / OSD on AWS / OCP on AWS" class=dd-item><input type=checkbox id=section-6293c009b4929ddbd0c9b2918068ea94 class=toggle><label for=section-6293c009b4929ddbd0c9b2918068ea94></label><a href=https://mobb.ninja/docs/rosa/waf/>Examples of using a WAF in front of ROSA / OSD on AWS / OCP on AWS</a><ul><li data-nav-id=/docs/rosa/waf/alb/ title="This is a POC of ROSA with a AWS WAF service" class=dd-item><a href=https://mobb.ninja/docs/rosa/waf/alb/>This is a POC of ROSA with a AWS WAF service</a></li><li data-nav-id=/docs/rosa/waf/readme-complex/ title="This is a POC of ROSA with a AWS WAF service" class=dd-item><a href=https://mobb.ninja/docs/rosa/waf/readme-complex/>This is a POC of ROSA with a AWS WAF service</a></li><li data-nav-id=/docs/rosa/waf/cloud-front/ title="Using CloudFront + WAF" class=dd-item><a href=https://mobb.ninja/docs/rosa/waf/cloud-front/>Using CloudFront + WAF</a></li></ul></li><li data-nav-id=/docs/rosa/using-sts-with-aws-services/ title="Extending ROSA STS to include authentication with AWS Services" class=dd-item><a href=https://mobb.ninja/docs/rosa/using-sts-with-aws-services/>Extending ROSA STS to include authentication with AWS Services</a></li><li data-nav-id=/docs/rosa/federated-metrics-prometheus/ title="Federating Metrics to a centralized Prometheus Cluster" class=dd-item><a href=https://mobb.ninja/docs/rosa/federated-metrics-prometheus/>Federating Metrics to a centralized Prometheus Cluster</a></li><li data-nav-id=/docs/rosa/sts-and-pod-identity/ title="Integrating with AWS resources using Pod Identity" class=dd-item><a href=https://mobb.ninja/docs/rosa/sts-and-pod-identity/>Integrating with AWS resources using Pod Identity</a></li><li data-nav-id=/docs/rosa/cluster-metrics-to-aws-prometheus/ title="ROSA - Federating Metrics to AWS Prometheus" class=dd-item><a href=https://mobb.ninja/docs/rosa/cluster-metrics-to-aws-prometheus/>ROSA - Federating Metrics to AWS Prometheus</a></li><li data-nav-id=/docs/rosa/aws-secrets-manager-csi/ title="Using AWS Secrets Manager CSI on Red Hat OpenShift on AWS with STS" class=dd-item><a href=https://mobb.ninja/docs/rosa/aws-secrets-manager-csi/>Using AWS Secrets Manager CSI on Red Hat OpenShift on AWS with STS</a></li><li data-nav-id=/docs/rosa/metrics-to-cloudwatch-agent/ title="Using the AWS Cloud Watch agent to publish metrics to CloudWatch in ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/metrics-to-cloudwatch-agent/>Using the AWS Cloud Watch agent to publish metrics to CloudWatch in ROSA</a></li><li data-nav-id=/docs/rosa/sts-cluster-logging-addon/ title="Work Around to fix the issue with the logging-addon on ROSA STS Clusters" class=dd-item><a href=https://mobb.ninja/docs/rosa/sts-cluster-logging-addon/>Work Around to fix the issue with the logging-addon on ROSA STS Clusters</a></li><li data-nav-id=/docs/rosa/clf-cloudwatch-sts/ title="Configuring the Cluster Log Forwarder for CloudWatch Logs and STS" class=dd-item><a href=https://mobb.ninja/docs/rosa/clf-cloudwatch-sts/>Configuring the Cluster Log Forwarder for CloudWatch Logs and STS</a></li><li data-nav-id=/docs/rosa/sts/ title="Creating a ROSA cluster in STS mode" class=dd-item><a href=https://mobb.ninja/docs/rosa/sts/>Creating a ROSA cluster in STS mode</a></li><li data-nav-id=/docs/rosa/private-link/ title="Creating a ROSA cluster with Private Link enabled" class=dd-item><input type=checkbox id=section-71f53e8bae0a034c83f5c2f0c7c9c315 class=toggle><label for=section-71f53e8bae0a034c83f5c2f0c7c9c315></label><a href=https://mobb.ninja/docs/rosa/private-link/>Creating a ROSA cluster with Private Link enabled</a><ul><li data-nav-id=/docs/rosa/private-link/public-ingress/ title="Adding a Public Ingress endpoint to a ROSA Private-Link Cluster" class=dd-item><a href=https://mobb.ninja/docs/rosa/private-link/public-ingress/>Adding a Public Ingress endpoint to a ROSA Private-Link Cluster</a></li></ul></li><li data-nav-id=/docs/rosa/sts-with-private-link/ title="Creating a ROSA cluster with Private Link enabled (custom VPC) and STS" class=dd-item><a href=https://mobb.ninja/docs/rosa/sts-with-private-link/>Creating a ROSA cluster with Private Link enabled (custom VPC) and STS</a></li><li data-nav-id=/docs/rosa/custom-alertmanager-4.9/ title="Custom AlertManager in ROSA 4.9.x" class=dd-item><a href=https://mobb.ninja/docs/rosa/custom-alertmanager-4.9/>Custom AlertManager in ROSA 4.9.x</a></li><li data-nav-id=/docs/rosa/aws-efs-operator-on-rosa/ title="Enabling the AWS EFS Operator on ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/aws-efs-operator-on-rosa/>Enabling the AWS EFS Operator on ROSA</a></li><li data-nav-id=/docs/rosa/federated-metrics/ title="Federating System and User metrics to S3 in Red Hat OpenShift for AWS" class=dd-item><input type=checkbox id=section-9567eab834a47ae397393da72ca0280d class=toggle><label for=section-9567eab834a47ae397393da72ca0280d></label><a href=https://mobb.ninja/docs/rosa/federated-metrics/>Federating System and User metrics to S3 in Red Hat OpenShift for AWS</a><ul><li data-nav-id=/docs/rosa/federated-metrics/user-defined/ title="User Workload Monitoring on Azure Red Hat OpenShift" class=dd-item><a href=https://mobb.ninja/docs/rosa/federated-metrics/user-defined/>User Workload Monitoring on Azure Red Hat OpenShift</a></li></ul></li><li data-nav-id=/docs/rosa/ack/ title="Using AWS Controllers for Kubernetes (ACK) on ROSA" class=dd-item><a href=https://mobb.ninja/docs/rosa/ack/>Using AWS Controllers for Kubernetes (ACK) on ROSA</a></li></ul></li><li data-nav-id=/docs/idp/ title="Configuring IDP for ROSA and OSD" class=dd-item><input type=checkbox id=section-de867ba7872b33ba38d343e5be5e3e1c class=toggle><label for=section-de867ba7872b33ba38d343e5be5e3e1c></label><a href=https://mobb.ninja/docs/idp/>Configuring IDP for ROSA and OSD</a><ul><li data-nav-id=/docs/idp/okta-grp-sync/ title="Using Group Sync Operator with Okta and ROSA/OSD" class=dd-item><a href=https://mobb.ninja/docs/idp/okta-grp-sync/>Using Group Sync Operator with Okta and ROSA/OSD</a></li><li data-nav-id=/docs/idp/azuread-aro/ title="Configure ARO to use Azure AD" class=dd-item><a href=https://mobb.ninja/docs/idp/azuread-aro/>Configure ARO to use Azure AD</a></li><li data-nav-id=/docs/idp/azuread-aro-cli/ title="Configure Azure AD as an OIDC identity provider for ARO with cli" class=dd-item><a href=https://mobb.ninja/docs/idp/azuread-aro-cli/>Configure Azure AD as an OIDC identity provider for ARO with cli</a></li><li data-nav-id=/docs/idp/azuread/ title="Configure Azure AD as an OIDC identity provider for ROSA/OSD" class=dd-item><a href=https://mobb.ninja/docs/idp/azuread/>Configure Azure AD as an OIDC identity provider for ROSA/OSD</a></li><li data-nav-id=/docs/idp/gitlab-aro/ title="Configure GitLab as an identity provider for ARO" class=dd-item><a href=https://mobb.ninja/docs/idp/gitlab-aro/>Configure GitLab as an identity provider for ARO</a></li><li data-nav-id=/docs/idp/gitlab/ title="Configure GitLab as an identity provider for ROSA/OSD" class=dd-item><a href=https://mobb.ninja/docs/idp/gitlab/>Configure GitLab as an identity provider for ROSA/OSD</a></li><li data-nav-id=/docs/idp/az-ad-grp-sync/ title="Using Group Sync Operator with Azure Active Directory and ROSA" class=dd-item><a href=https://mobb.ninja/docs/idp/az-ad-grp-sync/>Using Group Sync Operator with Azure Active Directory and ROSA</a></li><li data-nav-id=/docs/idp/group-claims/ title="MOBB Docs and Guides - group-claims" class=dd-item><input type=checkbox id=section-af199904c6a78739e6598ab72890c976 class=toggle><label for=section-af199904c6a78739e6598ab72890c976></label><a href=https://mobb.ninja/docs/idp/group-claims/>MOBB Docs and Guides - group-claims</a><ul><li data-nav-id=/docs/idp/group-claims/rosa/ title="Configure ROSA to use Azure AD Group Claims" class=dd-item><a href=https://mobb.ninja/docs/idp/group-claims/rosa/>Configure ROSA to use Azure AD Group Claims</a></li><li data-nav-id=/docs/idp/group-claims/aro/ title="Configure ARO to use Azure AD Group Claims" class=dd-item><a href=https://mobb.ninja/docs/idp/group-claims/aro/>Configure ARO to use Azure AD Group Claims</a></li></ul></li></ul></li><li data-nav-id=/docs/misc/ title=Miscellaneous class=dd-item><input type=checkbox id=section-4743293995ef089d075c101a4e477e5c class=toggle><label for=section-4743293995ef089d075c101a4e477e5c></label><a href=https://mobb.ninja/docs/misc/>Miscellaneous</a><ul><li data-nav-id=/docs/misc/tls-cipher-customization/ title="Configure ROSA/OSD to use custom TLS ciphers on the ingress controllers" class=dd-item><a href=https://mobb.ninja/docs/misc/tls-cipher-customization/>Configure ROSA/OSD to use custom TLS ciphers on the ingress controllers</a></li><li data-nav-id=/docs/misc/jup/ title="Jupyter Notebooks" class=dd-item><input type=checkbox id=section-7af6414e26181825f2ee42d2fad956be class=toggle><label for=section-7af6414e26181825f2ee42d2fad956be></label><a href=https://mobb.ninja/docs/misc/jup/>Jupyter Notebooks</a><ul><li data-nav-id=/docs/misc/jup/buildnotebook/ title="How to deploy Jupyter Notebook" class=dd-item><a href=https://mobb.ninja/docs/misc/jup/buildnotebook/>How to deploy Jupyter Notebook</a></li><li data-nav-id=/docs/misc/jup/opendatahub-gpu/ title="Installing the Open Data Hub Operator" class=dd-item><a href=https://mobb.ninja/docs/misc/jup/opendatahub-gpu/>Installing the Open Data Hub Operator</a></li></ul></li><li data-nav-id=/docs/misc/default-router-custom-domain/ title="Stop default router from serving custom domain routes" class=dd-item><a href=https://mobb.ninja/docs/misc/default-router-custom-domain/>Stop default router from serving custom domain routes</a></li><li data-nav-id=/docs/misc/references/ title="Common Managed OpenShift References / Tasks" class=dd-item><a href=https://mobb.ninja/docs/misc/references/>Common Managed OpenShift References / Tasks</a></li><li data-nav-id=/docs/misc/secrets-store-csi/ title="Installing the Kubernetes Secret Store CSI on OpenShift" class=dd-item><input type=checkbox id=section-83dcfc1bac9347003164dd6ca6bb9da6 class=toggle><label for=section-83dcfc1bac9347003164dd6ca6bb9da6></label><a href=https://mobb.ninja/docs/misc/secrets-store-csi/>Installing the Kubernetes Secret Store CSI on OpenShift</a><ul><li data-nav-id=/docs/misc/secrets-store-csi/azure-key-vault/ title="Azure Key Vault CSI on Azure Red Hat OpenShift" class=dd-item><a href=https://mobb.ninja/docs/misc/secrets-store-csi/azure-key-vault/>Azure Key Vault CSI on Azure Red Hat OpenShift</a></li><li data-nav-id=/docs/misc/secrets-store-csi/hashicorp-vault/ title="Installing the HashiCorp Vault Secret CSI Driver" class=dd-item><a href=https://mobb.ninja/docs/misc/secrets-store-csi/hashicorp-vault/>Installing the HashiCorp Vault Secret CSI Driver</a></li></ul></li><li data-nav-id=/docs/misc/common-images-namespace/ title="OpenShift - Sharing Common images" class=dd-item><a href=https://mobb.ninja/docs/misc/common-images-namespace/>OpenShift - Sharing Common images</a></li><li data-nav-id=/docs/misc/cost-management/ title="Red Hat Cost Management for Cloud Services" class=dd-item><a href=https://mobb.ninja/docs/misc/cost-management/>Red Hat Cost Management for Cloud Services</a></li><li data-nav-id=/docs/misc/oadp/ title="MOBB Docs and Guides - oadp" class=dd-item><input type=checkbox id=section-325dd7bf30613094ac338d7da82aacea class=toggle><label for=section-325dd7bf30613094ac338d7da82aacea></label><a href=https://mobb.ninja/docs/misc/oadp/>MOBB Docs and Guides - oadp</a><ul><li data-nav-id=/docs/misc/oadp/rosa-sts/ title="Deploying OpenShift Advanced Data Protection on a ROSA cluster" class=dd-item><a href=https://mobb.ninja/docs/misc/oadp/rosa-sts/>Deploying OpenShift Advanced Data Protection on a ROSA cluster</a></li></ul></li></ul></li><li data-nav-id=/docs/o11y/ title=Observability class=dd-item><input type=checkbox id=section-cf64d50e30bf8c808e1a384a9dd9f94e class=toggle><label for=section-cf64d50e30bf8c808e1a384a9dd9f94e></label><a href=https://mobb.ninja/docs/o11y/>Observability</a><ul><li data-nav-id=/docs/o11y/openshift-logging/ title="OpenShift Logging" class=dd-item><a href=https://mobb.ninja/docs/o11y/openshift-logging/>OpenShift Logging</a></li><li data-nav-id=/docs/o11y/az-log-analytics/ title="Shipping logs to Azure Log Analytics" class=dd-item><a href=https://mobb.ninja/docs/o11y/az-log-analytics/>Shipping logs to Azure Log Analytics</a></li></ul></li><li data-nav-id=/docs/gcp/ title="OSD on Google Cloud" class=dd-item><input type=checkbox id=section-34c34dd71fe103bc20cfa9eed6fa905c class=toggle><label for=section-34c34dd71fe103bc20cfa9eed6fa905c></label><a href=https://mobb.ninja/docs/gcp/>OSD on Google Cloud</a><ul><li data-nav-id=/docs/gcp/filestore/ title="Create Filestore Storage for OSD in GCP" class=dd-item><a href=https://mobb.ninja/docs/gcp/filestore/>Create Filestore Storage for OSD in GCP</a></li><li data-nav-id=/docs/gcp/osd_preexisting_vpc/ title="Creating a OSD in GCP with Existing VPCs" class=dd-item><a href=https://mobb.ninja/docs/gcp/osd_preexisting_vpc/>Creating a OSD in GCP with Existing VPCs</a></li></ul></li><li data-nav-id=/docs/redhat/ title="Other Red Hat Products" class=dd-item><input type=checkbox id=section-61ee77d4a0d9667d2a6b99ce46059f1d class=toggle><label for=section-61ee77d4a0d9667d2a6b99ce46059f1d></label><a href=https://mobb.ninja/docs/redhat/>Other Red Hat Products</a><ul><li data-nav-id=/docs/redhat/gitops/ title="Demonstrate GitOps on Managed OpenShift with ArgoCD" class=dd-item><a href=https://mobb.ninja/docs/redhat/gitops/>Demonstrate GitOps on Managed OpenShift with ArgoCD</a></li><li data-nav-id=/docs/redhat/3scale/ title="Deploying 3scale API Management to ROSA and OSD" class=dd-item><a href=https://mobb.ninja/docs/redhat/3scale/>Deploying 3scale API Management to ROSA and OSD</a></li><li data-nav-id=/docs/redhat/rhacs/ title="Deploying Red Hat Advanced Cluster Security in ARO/ROSA" class=dd-item><a href=https://mobb.ninja/docs/redhat/rhacs/>Deploying Red Hat Advanced Cluster Security in ARO/ROSA</a></li><li data-nav-id=/docs/redhat/crane/ title="Migrate Kubernetes Applications with Konveyer Crane" class=dd-item><a href=https://mobb.ninja/docs/redhat/crane/>Migrate Kubernetes Applications with Konveyer Crane</a></li><li data-nav-id=/docs/redhat/acm/ title="Advanced Cluster Management" class=dd-item><input type=checkbox id=section-d7942abe72cdf38022f3b7c824316905 class=toggle><label for=section-d7942abe72cdf38022f3b7c824316905></label><a href=https://mobb.ninja/docs/redhat/acm/>Advanced Cluster Management</a><ul><li data-nav-id=/docs/redhat/acm/observability/ title="Advanced Cluster Management - Observability" class=dd-item><input type=checkbox id=section-16c8cbcc1de529ce480045089e9bde5c class=toggle><label for=section-16c8cbcc1de529ce480045089e9bde5c></label><a href=https://mobb.ninja/docs/redhat/acm/observability/>Advanced Cluster Management - Observability</a><ul><li data-nav-id=/docs/redhat/acm/observability/rosa/ title="Advanced Cluster Management Observability on ROSA" class=dd-item><a href=https://mobb.ninja/docs/redhat/acm/observability/rosa/>Advanced Cluster Management Observability on ROSA</a></li></ul></li></ul></li></ul></li></ul></li></ul><div id=shortcuts><div class=nav-title></div><ul><li><a class=padding href=https://github.com/rh-mobb/documentation target=_blank><i class='fab fa-fw fa-github'></i> Github</a></li><li><a class=padding href=https://github.com/rh-mobb/documentation/archive/refs/heads/main.zip target=_blank><i class='fas fa-fw fa-file-download'></i> Download</a></li><li><a class=padding href=https://www.redhat.com/en/blog target=_blank><i class='fab fa-fw fa-redhat'></i> Red Hat Blog</a></li><li><a class=padding href=https://mobb.ninja/tags/ target=_blank><i class='fas fa-fw fa-tags'></i> Tags</a></li></ul></div><div class="footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"></div><hr class="default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showFooter"><div id=prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks"><ul><li id=select-language-container class=footerLangSwitch><a class="padding select-container"><i class="fas fa-language fa-fw"></i>
<span>&nbsp;</span><div class=select-style><select id=select-language onchange="location=baseUri+this.value"></select></div><div class=select-clear></div></a></li><li id=select-variant-container class=footerVariantSwitch><a class="padding select-container"><i class="fas fa-paint-brush fa-fw"></i>
<span>&nbsp;</span><div class=select-style><select id=select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=red value=red selected>Red</option></select></div><div class=select-clear></div></a><script>window.variants&&variants.markSelectedVariant()</script></li><li class=footerVisitedLinks><a class=padding onclick=clearHistory()><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></div><div id=footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></aside><script src=https://mobb.ninja/js/clipboard.min.js?1673631443 defer></script>
<script src=https://mobb.ninja/js/perfect-scrollbar.min.js?1673631443 defer></script>
<script src=https://mobb.ninja/js/featherlight.min.js?1673631443 defer></script>
<script src=https://mobb.ninja/js/theme.js?1673631443 defer></script></body></html>