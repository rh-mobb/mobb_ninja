<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>STS on Managed OpenShift Black Belt - Unofficial Documentation</title><link>https://mobb.ninja/tags/sts/</link><description>Recent content in STS on Managed OpenShift Black Belt - Unofficial Documentation</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Tue, 04 Oct 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://mobb.ninja/tags/sts/index.xml" rel="self" type="application/rss+xml"/><item><title>Verify Permissions for ROSA STS Deployment</title><link>https://mobb.ninja/docs/rosa/verify-permissions/</link><pubDate>Tue, 04 Oct 2022 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/rosa/verify-permissions/</guid><description>Tyler Stacey
Last updated 4 Oct 2022
To proceed with the deployment of a ROSA cluster, an account must support the required roles and permissions. AWS Service Control Policies (SCPs) cannot block the API calls made by the installer or operator roles.
Details about the IAM resources required for an STS-enabled installation of ROSA can be found here: https://docs.openshift.com/rosa/rosa_architecture/rosa-sts-about-iam-resources.html
This guide is validated for ROSA v4.11.X.
Prerequisites AWS CLI ROSA CLI v1.</description></item><item><title>STS OIDC in ROSA : How it works!</title><link>https://mobb.ninja/docs/rosa/sts-oidc-flow/</link><pubDate>Sat, 01 Oct 2022 00:00:00 +0000</pubDate><guid>https://mobb.ninja/docs/rosa/sts-oidc-flow/</guid><description>If you prefer a more visual medium, you can watch this video on YouTube.
This short video talks about how the STS OIDC flow work in ROSA (Red Hat OpenShift Service on AWS).</description></item><item><title>Deploying OpenShift Advanced Data Protection on a ROSA cluster</title><link>https://mobb.ninja/docs/misc/oadp/rosa-sts/</link><pubDate>Wed, 14 Sep 2022 22:07:09 +0000</pubDate><guid>https://mobb.ninja/docs/misc/oadp/rosa-sts/</guid><description>Prerequisites An STS enabled ROSA cluster Getting Started Create the following environment variables
Change the cluster name to match your ROSA cluster and ensure you&amp;rsquo;re logged into the cluster as an Administrator. Ensure all fields are outputted correctly before moving on.
export CLUSTER_NAME=my-cluster export ROSA_CLUSTER_ID=$(rosa describe cluster -c ${CLUSTER_NAME} --output json | jq -r .id) export REGION=$(rosa describe cluster -c ${CLUSTER_NAME} --output json | jq -r .region.id) export OIDC_ENDPOINT=$(oc get authentication.</description></item><item><title>Extending ROSA STS to include authentication with AWS Services</title><link>https://mobb.ninja/docs/rosa/using-sts-with-aws-services/</link><pubDate>Wed, 14 Sep 2022 22:07:09 +0000</pubDate><guid>https://mobb.ninja/docs/rosa/using-sts-with-aws-services/</guid><description>Extending ROSA STS to include authentication with AWS Services In this example we will deploy the Amazon Ingress Controller that uses ALBs, and configure it to use STS authentication.
Deployment Configure STS Make sure your cluster has the pod identity webhook
kubectl get mutatingwebhookconfigurations.admissionregistration.k8s.io pod-identity-webhook Download the IAM Policy for the AWS Load Balancer Hooks
wget https://raw.githubusercontent.com/kubernetes-sigs/aws-load-balancer-controller/v2.2.0/docs/install/iam_policy.json Create AWS Role with inline policy
aws iam create-role \ --role-name AWSLoadBalancerController --query Policy.</description></item><item><title>Integrating with AWS resources using Pod Identity</title><link>https://mobb.ninja/docs/rosa/sts-and-pod-identity/</link><pubDate>Wed, 14 Sep 2022 22:07:09 +0000</pubDate><guid>https://mobb.ninja/docs/rosa/sts-and-pod-identity/</guid><description>Integrating with AWS resources using Pod Identity Prerequisites ROSA CLI AWS CLI ROSA Cluster with STS</description></item><item><title>Work Around to fix the issue with the logging-addon on ROSA STS Clusters</title><link>https://mobb.ninja/docs/rosa/sts-cluster-logging-addon/</link><pubDate>Wed, 14 Sep 2022 22:07:09 +0000</pubDate><guid>https://mobb.ninja/docs/rosa/sts-cluster-logging-addon/</guid><description>Currently, the logging-addon is not working on ROSA STS clusters. This is due to permissions missing from the Operator itself. This is a work around to provide credentials to the addon.
Note: Please see the official Red Hat KCS for more information.
Prerequisites An STS based ROSA Cluster Workaround Uninstall the logging-addon from the cluster
rosa uninstall addon -c &amp;lt;mycluster&amp;gt; cluster-logging-operator -y Create a IAM Trust Policy document
cat &amp;lt;&amp;lt; EOF &amp;gt; /tmp/trust-policy.</description></item><item><title>Creating a ROSA cluster in STS mode</title><link>https://mobb.ninja/docs/rosa/sts/</link><pubDate>Wed, 14 Sep 2022 22:07:08 +0000</pubDate><guid>https://mobb.ninja/docs/rosa/sts/</guid><description>Paul Czarkowski
Last updated 05/31/2022
Tip The official documentation for installing a ROSA cluster in STS mode can be found here.
Quick Introduction by Ryan Niksch (AWS) and Shaozen Ding (Red Hat) on YouTube
STS allows us to deploy ROSA without needing a ROSA admin account, instead it uses roles and policies with Amazon STS (secure token service) to gain access to the AWS resources needed to install and operate the cluster.</description></item><item><title>Creating a ROSA cluster with Private Link enabled (custom VPC) and STS</title><link>https://mobb.ninja/docs/rosa/sts-with-private-link/</link><pubDate>Wed, 14 Sep 2022 22:07:08 +0000</pubDate><guid>https://mobb.ninja/docs/rosa/sts-with-private-link/</guid><description>Steve Mirman, Paul Czarkowski
Last updated 1/28/2022
This is a combination of the private-link and sts setup documents to show the full picture
Prerequisites AWS CLI Rosa CLI v1.1.7 jq AWS Preparation If this is a brand new AWS account that has never had a AWS Load Balancer installed in it, you should run the following
aws iam create-service-linked-role --aws-service-name \ &amp;#34;elasticloadbalancing.amazonaws.com&amp;#34; Create the AWS Virtual Private Cloud (VPC) and Subnets For this scenario, we will be using a newly created VPC with both public and private subnets.</description></item></channel></rss>